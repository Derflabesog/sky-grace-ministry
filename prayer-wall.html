﻿﻿﻿﻿﻿<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prayer Wall | Sky Grace Ministry</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body class="bg-slate-100 text-slate-900">
<div id="site-header"></div>
<script src="header.js" defer></script>

<main class="container mx-auto px-6 py-12">
        <div class="max-w-4xl mx-auto">
            
            <div class="bg-white rounded-3xl p-8 shadow-xl border border-blue-100 mb-12">
                <h3 class="text-xl font-black uppercase mb-4">Submit a Request</h3>
                <div class="space-y-4">
                    <input type="text" id="prayerName" placeholder="Your Name (or Anonymous)" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-blue-400">
                    <textarea id="prayerText" rows="3" placeholder="What are we believing God for?" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 text-sm focus:outline-none focus:border-blue-400"></textarea>
                    <button onclick="postPrayer()" class="bg-blue-500 text-white px-8 py-3 rounded-xl text-xs font-black uppercase tracking-widest hover:bg-blue-600 transition">Post to Wall</button>
                </div>
            </div>

            <div id="wallContainer" class="grid md:grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition">
                    <p class="text-slate-600 italic mb-4 text-sm">"Believing for a total recovery for my mother who is in the hospital. We stand on Isaiah 53:5."</p>
                    <div class="flex justify-between items-center pt-4 border-t border-slate-50">
                        <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">â€” Sarah, Windhoek</span>
                        <button class="flex items-center gap-2 text-xs font-bold text-blue-500 hover:bg-blue-50 px-3 py-1 rounded-full transition">
                            <i class="fas fa-hands-praying"></i> I Prayed
                        </button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', loadPublicPrayers);

        function loadPublicPrayers() {
            const wall = document.getElementById('wallContainer');
            const requests = JSON.parse(localStorage.getItem('prayerRequests')) || [];
            const approved = requests.filter(r => r.status === 'Approved');

            if (approved.length > 0) {
                wall.innerHTML = ''; // Clear static example
                // Sort by ID descending (newest first)
                approved.sort((a, b) => b.id - a.id).forEach(req => {
                    const card = document.createElement('div');
                    card.className = "bg-white p-6 rounded-2xl shadow-sm border border-slate-200 hover:shadow-md transition animate-fade-up";
                    card.innerHTML = `
                        <p class="text-slate-600 italic mb-4 text-sm">"${req.text}"</p>
                        <div class="flex justify-between items-center pt-4 border-t border-slate-50">
                            <span class="text-[10px] font-black text-slate-400 uppercase tracking-widest">&mdash; ${req.name} <span class="hidden md:inline">• ${req.date}</span></span>
                            <button onclick="this.classList.toggle('text-green-500')" class="flex items-center gap-2 text-xs font-bold text-blue-500 hover:bg-blue-50 px-3 py-1 rounded-full transition">
                                <i class="fas fa-hands-praying"></i> I Prayed
                            </button>
                        </div>
                    `;
                    wall.appendChild(card);
                });
            }
        }

        function postPrayer() {
            const nameInput = document.getElementById('prayerName');
            const textInput = document.getElementById('prayerText');
            const name = nameInput.value || "Anonymous";
            const text = textInput.value;
            
            if(!text) return alert("Please enter a prayer request.");

            const newRequest = {
                id: Date.now(),
                name: name,
                date: new Date().toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' }),
                text: text,
                status: 'Pending' // Default to Pending for admin review
            };

            // Save to LocalStorage
            let requests = JSON.parse(localStorage.getItem('prayerRequests')) || [];
            requests.push(newRequest);
            localStorage.setItem('prayerRequests', JSON.stringify(requests));

            alert("Your prayer request has been submitted and is pending approval.");
            
            nameInput.value = "";
            textInput.value = "";
        }
    </script>

<div id="site-footer"></div>
<script src="./footer.js" defer></script>
<script src="assets/js/back-to-top.js"></script>
</body>
</html>
